<!--
  Generated template for the ScorematchPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar hideBackButton *ngIf="!(srcparam == 'fromMatches')" color="primary">
    <ion-title>{{matchService.abbrTeam1}} Vs {{matchService.abbrTeam2}}, {{matchService.match.matchType}}, {{matchService.match.pool}} </ion-title>
  </ion-navbar>

  <ion-navbar color="primary"  *ngIf="srcparam == 'fromMatches'">
    <ion-title>{{matchService.abbrTeam1}} Vs {{matchService.abbrTeam2}}, {{matchService.match.matchType}}, {{matchService.match.pool}} </ion-title>
  </ion-navbar>
</ion-header>


<ion-content class="gray-bg">
	  
	<div class="white-bg" text-center padding-vertical>
	    <img width=70 height=47 src="https://image.ibb.co/cFLAga/CSTL.png">
	    <p>Toss won by {{matchService.abbrToss}}, chosen {{matchService.match.chosen}}</p>
	</div>

	<ion-card margin-top>
		<ion-list>
		  <ion-item>
		    <ion-avatar item-start>
		      <img src="{{matchService.team1.logoUrl}}">
		    </ion-avatar>
		    <ion-grid class="white-bg">
			    <ion-row>
				  	<ion-col  no-margin no-padding col-4 text-center middle>
				  		<h1 middle *ngIf="!matchService.isSetCompleted('set1') || matchService.setWonBy('set1') != 'team1'">{{matchService.team1set1points}}</h1>
				  		<button ion-button color="dark" *ngIf="matchService.isSetCompleted('set1') && (matchService.setWonBy('set1') == 'team1')">{{matchService.team1set1points}}</button>
			  		</ion-col>
				  	<ion-col  no-margin no-padding col-4 text-center middle>
				  		<h1 middle *ngIf="!matchService.isSetCompleted('set2') || matchService.setWonBy('set2') != 'team1'">{{matchService.team1set2points}}</h1>
				  		<button ion-button color="dark" *ngIf="matchService.isSetCompleted('set2') && (matchService.setWonBy('set2') == 'team1')">{{matchService.team1set2points}}</button>
				  	</ion-col>
				  	<ion-col  no-margin no-padding col-4 text-center middle>
				  		<h1 middle *ngIf="!matchService.isSetCompleted('set3') || matchService.setWonBy('set3') != 'team1'">{{matchService.team1set3points}}</h1>
				  		<button ion-button color="dark" *ngIf="matchService.isSetCompleted('set3') && (matchService.setWonBy('set3') == 'team1')">{{matchService.team1set3points}}</button>
			  		</ion-col>
			  	</ion-row>
		  	</ion-grid>
		  </ion-item>
		  <ion-item>
		    <ion-avatar item-start>
		      <img src="{{matchService.team2.logoUrl}}">
		    </ion-avatar>
		    <ion-grid class="white-bg">
			    <ion-row>
				  	<ion-col no-margin no-padding col-4 text-center middle>
				  		<h1 middle *ngIf="!matchService.isSetCompleted('set1') || matchService.setWonBy('set1') == 'team1'">{{matchService.team2set1points}}</h1>
				  		<button ion-button color="dark" *ngIf="matchService.isSetCompleted('set1') && (matchService.setWonBy('set1') != 'team1')">{{matchService.team2set1points}}</button>
			  		</ion-col>
				  	<ion-col no-margin no-padding col-4 text-center middle>
				  		<h1 middle *ngIf="!matchService.isSetCompleted('set2') || matchService.setWonBy('set2') == 'team1'">{{matchService.team2set2points}}</h1>
				  		<button ion-button color="dark" *ngIf="matchService.isSetCompleted('set2') && (matchService.setWonBy('set2') != 'team1')">{{matchService.team2set2points}}</button>
				  	</ion-col>
				  	<ion-col  no-margin no-padding col-4 text-center middle>
				  		<h1 middle *ngIf="!matchService.isSetCompleted('set3') || matchService.setWonBy('set3') == 'team1'">{{matchService.team2set3points}}</h1>
				  		<button ion-button color="dark" *ngIf="matchService.isSetCompleted('set3') && (matchService.setWonBy('set3') != 'team1')">{{matchService.team2set3points}}</button>
			  		</ion-col>
			  	</ion-row>
		  	</ion-grid>
		  </ion-item>
		</ion-list>
	</ion-card>

	<ion-card margin-top *ngIf="!(srcparam == 'fromMatches')" >
		<ion-grid class="white-bg">
	    <ion-row>
		  	<ion-col col-6 text-center>
		  		<ion-list class="white-bg">
					  <div margin-top>
					    {{matchService.upprTeam1}}
					  </div>
					  <ion-item text-center>
					  	<button ion-button large color="danger">-1</button>
					  	<button *ngIf="!matchService.isSetCompleted(matchService.match.currentSet)" (click)="addPoint('t1','t2')" ion-button large color="secondary">+1</button>
					  </ion-item>
					</ion-list>
		  		
		  	</ion-col>
	  	
		  	<ion-col col-6 text-center>
		  		<ion-list class="white-bg">
					  <div margin-top>
					    {{matchService.upprTeam2}}
					  </div>
					  <ion-item text-center>
					  	<button ion-button large color="danger">-1</button>
					  	<button *ngIf="!matchService.isSetCompleted(matchService.match.currentSet)" (click)="addPoint('t2','t1')"  ion-button large color="secondary">+1</button>
					  </ion-item>
					</ion-list>
		  	</ion-col>
	  	</ion-row>
  	</ion-grid>
	</ion-card>

	<div text-center *ngIf="!(srcparam == 'fromMatches')" >
  		<button (click)="routeToSubsPage()" *ngIf="!matchService.isSetCompleted(matchService.match.currentSet)" ion-button color="menu-o">
	    	<div>
	  			 <p ion-text color="white"><ion-icon color="white" name="contact"></ion-icon> Substitution</p>
	  		 </div>
  		 </button>
		
  		<button (click)="routeToTimeoutsPage()"  *ngIf="!matchService.isSetCompleted(matchService.match.currentSet)" ion-button color="menu-o">
		    <div>
	  			<p ion-text color="white"><ion-icon color="white" name="time"></ion-icon> Timeout</p>
  			</div>
			</button>
  	
  		<button (click)="completeSet(matchService.match.currentSet)" *ngIf="matchService.isSetCompleted(matchService.match.currentSet)" ion-button  color="menu-o">
		    <div>
		  		 <p ion-text color="white"><ion-icon color="white" name="time"></ion-icon> Complete Set</p>
	  		 </div>
		 	</button>
	 </div>

	 <div>
		<ion-list>
			<ion-item  *ngFor="let setpoint of matchService.set1points">
		    <div><span class="font-500">{{setpoint.point}},</span>
		    <span> {{setpoint.team}} point</span>
		    <div *ngIf="!(setpoint.wonMethod == 'Opponent Error')">{{setpoint.wonMethod}} point by {{setpoint.wonBy}} <span> & assisted by {{setpoint.assistBy}}</span>;</div>
		    <div *ngIf="setpoint.errorMethod">{{setpoint.errorMethod}} by {{setpoint.errorBy}}</div></div>
		  </ion-item>
		</ion-list>
	 </div>
  		
</ion-content>






